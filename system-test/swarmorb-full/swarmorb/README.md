# SwarmOrb

Read-only explorer for SwarmOS epochs and operator activity.

**Live at:** `swarmorb.eth.limo` (via IPFS)

## Overview

SwarmOrb is a static web application that visualizes SwarmOS protocol data:

- **Overview**: Live status, aggregate stats, latest epoch
- **Epochs**: Browse all finalized epochs with treasury/payout details
- **Agents**: Live agent status and all-time leaderboard
- **Clients**: Client activity aggregated from epoch data
- **Verify**: Hash verification of epoch bundles using WebCrypto

## Architecture

```
swarmorb/
├── apps/
│   ├── orb-ui/           # Astro static site
│   └── orb-indexer/      # Python indexer
├── schemas/              # JSON schemas
├── sample_data/          # Example epoch data
├── docs/                 # Documentation
├── bin/                  # CLI helpers
└── Makefile
```

## Data Flow

```
audit/epoch-*/ → orb-indexer → orb/index.json → orb-ui
                                orb/live.json ←────────┘
```

### Data Files

| File | Description | Source |
|------|-------------|--------|
| `orb/index.json` | Epoch manifest + aggregate stats | Generated by indexer |
| `orb/live.json` | Real-time coordinator state | Signed by swarmos.eth |
| `audit/epoch-*/SUMMARY.json` | Epoch treasury + payouts | Finalized epoch bundle |
| `audit/epoch-*/SIGNATURE.txt` | Artifact hashes + EIP-191 sig | Finalized epoch bundle |

## Quick Start

### Prerequisites

- Node.js 18+
- Python 3.11+
- pnpm or npm

### Install

```bash
make install
```

### Development

```bash
make dev
```

Opens http://localhost:4321 with sample data.

### Build

```bash
make build
```

Outputs static site to `./dist/`

### Regenerate Index

```bash
make index
```

Scans `sample_data/audit/` and regenerates `index.json`.

## Deployment

### IPFS (swarmorb.eth.limo)

```bash
make build
ipfs add -r dist
# Update swarmorb.eth content hash
```

### Cloudflare Pages

```bash
make build
npx wrangler pages deploy dist --project-name=swarmorb
```

## Indexer CLI

```bash
cd apps/orb-indexer

# Generate index from audit folder
python3 -m orb_indexer --audit-dir ./audit --out-dir ./orb

# Options
python3 -m orb_indexer --help
```

## Verification

The Verify page implements client-side hash verification:

1. Downloads `SIGNATURE.txt` from epoch bundle
2. Parses expected SHA256 hashes
3. Fetches each artifact (SUMMARY.json, jobs.json, etc.)
4. Computes SHA256 using WebCrypto API
5. Compares computed vs expected hashes
6. Displays PASS/FAIL for each artifact

**Note:** EIP-191 signature verification is TODO. The signature data is displayed for manual verification.

## JSON Schemas

Located in `/schemas/`:

- `index.schema.json` - Epoch index manifest
- `live.schema.json` - Real-time coordinator state
- `summary.schema.json` - Epoch SUMMARY.json format

## ENS Names

| Name | Role |
|------|------|
| `swarmos.eth` | Coordinator |
| `swarmorb.eth` | This explorer |
| `swarmepoch.eth` | Epoch registry |
| `swarmrails.eth` | Infrastructure |
| `*.swarmcompute.eth` | Operators |
| `*.swarmvision.eth` | Clients |

## Tech Stack

- **UI**: Astro 5.x + Tailwind CSS
- **Indexer**: Python 3.11 + Pydantic
- **Verification**: WebCrypto API
- **Hosting**: IPFS / Cloudflare Pages

## Design Principles

1. **Read-only**: Never mutates epoch data
2. **Static**: No server required, runs entirely in browser
3. **Verifiable**: Client-side hash verification
4. **Decentralized**: Deployable to IPFS with ENS resolution

## License

MIT
